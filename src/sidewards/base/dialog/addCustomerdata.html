<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>客户资料</title>
    <link rel="stylesheet" href="../../../../public/dist/css/layui.css">
</head>
<body>

<blockquote class="layui-elem-quote layui-text">
    客户资料
</blockquote>
<form class="layui-form" action="" lay-filter="example" id="example">

    <div class="layui-form-item">
        <div class="layui-inline">
            <label class="layui-form-label" style="width: 100px"  >客户代号</label>
            <div class="layui-input-inline">
                <input type="text" name="a"  class="layui-input">
            </div>
        </div>
        <div class="layui-inline">
            <label class="layui-form-label" style="width: 100px"  >客户简称</label>
            <div class="layui-input-inline">
                <input type="text" name="b"  class="layui-input">
            </div>
        </div>
    </div>
    <div class="layui-form-item">
        <div class="layui-inline">
            <label class="layui-form-label" style="width: 100px"  >客户全称</label>
            <div class="layui-input-inline">
                <input type="text" name="c"  class="layui-input" >
            </div>
        </div>
        <div class="layui-inline">
            <label class="layui-form-label" style="width: 100px"  >客户类别</label>
            <div class="layui-input-inline">
                <input type="text" name="d"  class="layui-input">
            </div>
        </div>
    </div>
    <div class="layui-form-item">
        <div class="layui-inline">
            <label class="layui-form-label" style="width: 100px"  >负责人</label>
            <div class="layui-input-inline">
                <input type="text" name="e"  class="layui-input">
            </div>
        </div>
        <div class="layui-inline">
            <label class="layui-form-label" style="width: 100px"  >折扣方案</label>
            <div class="layui-input-inline">
                <input type="text" name="f"  class="layui-input">
            </div>
        </div>
    </div>
    <div class="layui-form-item">
        <div class="layui-inline">
            <label class="layui-form-label" style="width: 100px"  >联系人</label>
            <div class="layui-input-inline">
                <input type="text" name="g"  class="layui-input">
            </div>
        </div>
        <div class="layui-inline">
            <label class="layui-form-label" style="width: 100px"  >手机</label>
            <div class="layui-input-inline">
                <input type="text" name="h"  class="layui-input">
            </div>
        </div>
    </div>
    <div class="layui-form-item">
        <div class="layui-inline">
            <label class="layui-form-label" style="width: 100px"  >业务部门名称</label>
            <div class="layui-input-inline">
                <input type="text" name="i"  class="layui-input">
            </div>
        </div>
        <div class="layui-inline">
            <label class="layui-form-label" style="width: 100px"  >业务员名称</label>
            <div class="layui-input-inline">
                <input type="text" name="j"  class="layui-input">
            </div>
        </div>
    </div>
    <div class="layui-form-item">
        <div class="layui-inline">
            <label class="layui-form-label" style="width: 100px"  >电话号码</label>
            <div class="layui-input-inline">
                <input type="text" name="k"  class="layui-input">
            </div>
        </div>
        <div class="layui-inline">
            <label class="layui-form-label" style="width: 100px"  >传真号码</label>
            <div class="layui-input-inline">
                <input type="text" name="l"  class="layui-input">
            </div>
        </div>
    </div>
    <div class="layui-form-item">
        <div class="layui-inline">
            <label class="layui-form-label" style="width: 100px"  >城市</label>
            <div class="layui-input-inline">
                <input type="text" name="m"  class="layui-input">
            </div>
        </div>
        <div class="layui-inline">
            <label class="layui-form-label" style="width: 100px"  >业务员</label>
            <div class="layui-input-inline">
                <input type="text" name="n"  class="layui-input">
            </div>
        </div>
    </div>
    <div class="layui-form-item">
        <div class="layui-inline">
            <label class="layui-form-label" style="width: 100px"  >省</label>
            <div class="layui-input-inline">
                <input type="text" name="o"  class="layui-input">
            </div>
        </div>
        <div class="layui-inline">
            <label class="layui-form-label" style="width: 100px"  >邮政编码</label>
            <div class="layui-input-inline">
                <input type="text" name="p"  class="layui-input">
            </div>
        </div>
    </div>
    <div class="layui-form-item">
        <div class="layui-inline">
            <label class="layui-form-label" style="width: 100px"  >国家</label>
            <div class="layui-input-inline">
                <input type="text" name="q"  class="layui-input">
            </div>
        </div>
        <div class="layui-inline">
            <label class="layui-form-label" style="width: 100px"  >电子邮件</label>
            <div class="layui-input-inline">
                <input type="text" name="r"  class="layui-input">
            </div>
        </div>
    </div>
    <div class="layui-form-item">
        <div class="layui-inline">
            <label class="layui-form-label" style="width: 100px"  >网址</label>
            <div class="layui-input-inline">
                <input type="text" name="s"  class="layui-input">
            </div>
        </div>
        <div class="layui-inline">
            <label class="layui-form-label" style="width: 100px"  >详细地址</label>
            <div class="layui-input-inline">
                <input type="text" name="t"  class="layui-input">
            </div>
        </div>
    </div>
    <div class="layui-form-item">
        <div class="layui-inline">
            <label class="layui-form-label" style="width: 100px"  >账号</label>
            <div class="layui-input-inline">
                <input type="text" name="u"  class="layui-input">
            </div>
        </div>
        <div class="layui-inline">
            <label class="layui-form-label" style="width: 100px"  >创建时间</label>
            <div class="layui-input-inline">
                <input type="date" name="v"  class="layui-input">
            </div>
        </div>
    </div><div class="layui-form-item">
    <div class="layui-inline">
        <label class="layui-form-label" style="width: 100px"  >业务部门</label>
        <div class="layui-input-inline">
            <input type="text" name="w"  class="layui-input">
        </div>
    </div>
    <div class="layui-inline">
        <label class="layui-form-label" style="width: 100px"  >作废</label>
        <div class="layui-input-inline">
            <input type="text" name="x"  class="layui-input">
        </div>
    </div>
</div>
    <div class="layui-form-item">
        <div class="layui-inline">
            <label class="layui-form-label" style="width: 100px"  >押金</label>
            <div class="layui-input-inline">
                <input type="text" name="y"  class="layui-input">
            </div>
        </div>
        <div class="layui-inline">
            <label class="layui-form-label" style="width: 100px"  >押金占比</label>
            <div class="layui-input-inline">
                <input type="text" name="z"  class="layui-input">
            </div>
        </div>
    </div>
    <div class="layui-form-item">
        <div class="layui-inline">
            <label class="layui-form-label" style="width: 100px"  >应收系数</label>
            <div class="layui-input-inline">
                <input type="text" name="aa"  class="layui-input">
            </div>
        </div>
    </div>


    <div class="layui-form-item">
        <div class="layui-input-block">
            <button class="layui-btn" lay-submit="" lay-filter="demo1">立即提交</button>
            <button type="reset" class="layui-btn cancels">取消</button>
        </div>
    </div>
</form>
</body>
<script src="../../../../js/module/jquery-3.4.1.min.js"></script>
<script src="../../../../public/dist/layui.js" charset="utf-8"></script>
<script src="../../../../js/common/api.js"></script>
<script type="text/javascript">
    var dataId = null;
    layui.config({
        base: '../../../../js/module/'
    }).use(['Tool','form', 'layedit', 'laydate',"serviceTools"],function () {
        layui.Tool.init();
        var form = layui.form
            ,layer = layui.layer
            ,layedit = layui.layedit
            ,laydate = layui.laydate,
            serviceTools = layui.serviceTools;
        //监听提交
        form.on('submit(demo1)', function(data){
            console.log("-----------",data)
            var type = localStorage.getItem("type");
            if ( type === null ){
                alert("数据类型不能为空")
            }else{
                var zd = { id:dataId === null ? "" : dataId,
                    type:type,
                    context:JSON.stringify(data.field),
                    keyword:data.field.a+"|"+data.field.b
                }
                serviceTools.EditOrSaveOrDelete({
                    parame:zd,
                    url:baseaip+"dictionaries/saveOrUpdate",
                    callback:(function(){
                        window.history.back(-2);
                    })()
                })

            }
            return false;
        });

        // console.info(location.href.split("?")[1])
        getHrefId();

    });
    function getHrefId(){
        var loc = location.href;
        console.log(loc);
        var url = loc.split("?")[1];
        console.log(url);
        if(url && url!=''){
            var para = url.split("&");
            var len = para.length;
            var res = {};
            var arr = [];
            for(var i=0;i<len;i++){
                arr = para[i].split("=");
                res[arr[0]] = arr[1];
            }
            dataId = res.id;
            var dataJson = localStorage.getItem([res.id]);
            dataJson != null && dataJson.trim().length > 0 ? (function(){
                data  = JSON.parse(dataJson);
                setForm(data);
            })():"";

        }else{

        }

    }
    function setForm(data){
        layui.use(['form'], function () {
            console.log(data);
            console.log('data');

            layui.form.val('example', JSON.parse(data.context));
        })
    }

</script>

</html>